var GameScene=function(t){function e(){t.call(this),this._imageLoader=new ImageLoader,this._imageLoader.addImage("http://7xqx50.com1.z0.glb.clouddn.com/%E9%9B%B6JS%E5%9F%BA%E7%A1%80%E7%8E%A9%E8%BD%ACRN-13.jpg"),this._imageLoader.addEventListener(egret.Event.COMPLETE,this.onLoadCompleted,this),this._imageLoader.startLoad(),this.graphics.beginFill(16777215,1),this.graphics.drawRect(0,0,libra.display.stageWidth(),libra.display.stageHeight()),this.graphics.endFill(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onLoadComplete=function(t,e){this.addChild(new egret.Bitmap(t))},n.onTap=function(t){this.doNext()},n.doNext=function(){},n.onLoadCompleted=function(t){this.addChild(new egret.Bitmap(this._imageLoader.getTexture("http://7xqx50.com1.z0.glb.clouddn.com/%E9%9B%B6JS%E5%9F%BA%E7%A1%80%E7%8E%A9%E8%BD%ACRN-13.jpg")))},e}(egret.Sprite);egret.registerClass(GameScene,"GameScene");var libra;!function(t){var e;!function(t){var e=function(){function t(t){void 0===t&&(t={}),this.elements=t,this.hasSpecialProto=!1,this.specialProto=void 0}var e=(__define,t),i=e.prototype;return i.has=function(t){return"__proto__"===t?this.hasSpecialProto:{}.hasOwnProperty.call(this.elements,t)},i.get=function(t){return"__proto__"===t?this.specialProto:this.has(t)?this.elements[t]:void 0},i.set=function(t,e){"__proto__"===t?(this.hasSpecialProto=!0,this.specialProto=e):this.elements[t]=e},i.remove=function(t){"__proto__"===t?(this.hasSpecialProto=!1,this.specialProto=void 0):delete this.elements[t]},t}();t.Dictionary=e,egret.registerClass(e,"libra.collection.Dictionary")}(e=t.collection||(t.collection={}))}(libra||(libra={}));var libra;!function(t){var e;!function(e){var i=function(){function e(t){this._collection=null==t?[]:t.concat()}var i=__define,n=e,r=n.prototype;return r.addItem=function(t){return this._collection.push(t),!0},r.addItemAt=function(t,e){return void 0===e&&(e=0),this._collection.splice(e,0,t),!0},r.addItems=function(t){return this._collection=this._collection.concat(t.toArray()),!0},r.addItemsAt=function(e,i){return void 0===i&&(i=2147483647),t.utils.arrayUtil.insertAt(this._collection,e.toArray(),i)},r.clear=function(){this._collection.splice(0)},r.contains=function(t){return-1!=this.indexOf(t)},r.containsAll=function(e){return t.utils.arrayUtil.containsAll(this._collection,e.toArray())},r.getItemAt=function(t){return void 0===t&&(t=0),this._collection[t]},r.subList=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=16777215),new e(this._collection.slice(t,i))},r.indexOf=function(t,e){return void 0===e&&(e=0),this._collection.indexOf(t,e)},r.isEmpty=function(){return 0==this.size},r.lastIndexOf=function(t,e){return void 0===e&&(e=2147483647),this._collection.lastIndexOf(t,e)},i(r,"size",function(){return this._collection.length}),r.removeAllInstancesOfItem=function(e){return 0!=t.utils.arrayUtil.removeItem(this._collection,e)},r.removeItem=function(t){var e=this._collection.indexOf(t);return-1==e?!1:(this._collection.splice(e,1),!0)},r.removeItemAt=function(t){return void 0===t&&(t=0),this._collection.splice(t,1)[0]},r.removeItems=function(e){return t.utils.arrayUtil.removeItems(this._collection,e.toArray())},r.retainItems=function(e){return t.utils.arrayUtil.retainItems(this._collection,e.toArray())},r.setItem=function(t,e){return void 0===e&&(e=0),this._collection.splice(e,1,t)[0]},r.toArray=function(){return this._collection.concat()},r.clone=function(){return new e(this.toArray())},e}();e.List=i,egret.registerClass(i,"libra.collection.List")}(e=t.collection||(t.collection={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){function e(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"micromessenger"==e}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function n(){var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i);return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function r(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"}function o(){if(egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5){if(-1!=navigator.userAgent.indexOf("MQQBrowser"))return"QQ";if(-1!=navigator.userAgent.indexOf("MSIE"))return"IE";if(-1!=navigator.userAgent.indexOf("Firefox"))return"Firefox";if(-1!=navigator.userAgent.indexOf("Chrome"))return"Chrome";if(-1!=navigator.userAgent.indexOf("Safari"))return"Safari";if(-1!=navigator.userAgent.indexOf("Opera"))return"Opera"}return null}t.isWeiXin=e,t.isBigScreen=i,t.systemType=n,t.platformType=r,t.getBrowserType=o}(e=t.device||(t.device={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){function e(t){return new egret.Bitmap(RES.getRes(t))}function i(){return egret.MainContext.instance}function n(){return i().stage.stageWidth}function r(){return i().stage.stageHeight}function o(){return n()>>1}function a(){return r()>>1}t.createBitmap=e,t.getMain=i,t.stageWidth=n,t.stageHeight=r,t.cx=o,t.cy=a}(e=t.display||(t.display={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(){function t(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=null),this._index=t,this._texture=e,this._x=i,this._y=n,this._label=r,this._funList=[]}var e=__define,n=t,r=n.prototype;return e(r,"index",function(){return this._index}),e(r,"texture",function(){return this._texture}),e(r,"label",function(){return this._label}),r.addFun=function(t,e,n,r){void 0===r&&(r=!1);var o=new i(t,e,n,r);-1==this._funList.indexOf(o)&&(this._funList[this._funList.length]=o)},r.removeFun=function(t){for(var e=this._funList,i=e.length;--i>-1;)if(e[i].fun==t)return void e.splice(i,1)},r.doFun=function(){var t=this._funList;if(t)for(var e=t.slice(),i=e.length,n=0;i>n;n+=1)e[n].doFun(),e[n].disposeEnabled&&t.splice(n,1)},e(r,"x",function(){return this._x},function(t){this._x=t}),e(r,"y",function(){return this._y},function(t){this._y=t}),t}();t.JMCFrame=e,egret.registerClass(e,"libra.displayObject.JMCFrame");var i=function(){function t(t,e,i,n){void 0===n&&(n=!1),this._fun=t,this._params=e,this._thisObj=i,this._disposeEnabled=n}var e=__define,i=t,n=i.prototype;return e(n,"disposeEnabled",function(){return this._disposeEnabled}),e(n,"fun",function(){return this._fun}),n.doFun=function(){this._fun.apply(this._thisObj,this._params)},t}();egret.registerClass(i,"FrameFun")}(e=t.displayObject||(t.displayObject={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.removeSelf=function(){this.parent&&this.parent.removeChild(this)},n.addTo=function(t,e){e?t.addChildAt(this,e):t.addChild(this)},n.onAddedToStage=function(t){this.once(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this)},n.onRemovedFromStage=function(t){this.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)},e}(egret.Sprite);t.JSprite=e,egret.registerClass(e,"libra.displayObject.JSprite",["libra.displayObject.IDisplayObject"])}(e=t.displayObject||(t.displayObject={}))}(libra||(libra={}));var libra;!function(t){var e;!function(e){var i=function(e){function i(t){void 0===t&&(t=10),e.call(this),this._frameRate=t,this._tickable=!0,this._loops=-1,this._rateTimer=0,this._frameTimer=0,this._curFrame=0,this._numFrame=0,this.frameRate=t,this._baseBitmap=new egret.Bitmap,this.addChild(this._baseBitmap)}__extends(i,e);var n=__define,r=i,o=r.prototype;return n(o,"frameRate",function(){return this._frameRate},function(t){this._frameRate=t,this._rateTimer=1e3/t}),n(o,"pixelHitTest",function(){return this._baseBitmap.pixelHitTest},function(t){this._baseBitmap.pixelHitTest=t}),o.hitTestPoint=function(t,e,i){return this._baseBitmap.hitTestPoint(t,e,i)},o.gotoAndPlay=function(t){this.gotoFrame(t),this.play()},o.play=function(){this._isPlaying=!0},o.gotoAndStop=function(t){this.gotoFrame(t),this.stop()},o.stop=function(){this.pause(),this.curFrame=0},o.pause=function(){this._frameTimer=0,this._isPlaying=!1},o.isPlaying=function(){return this._isPlaying},o.addFrameAction=function(e,i,n,r,o){void 0===n&&(n=null),void 0===o&&(o=!1);var a=this.getFrame(e);a=t.utils.mathUtil.MathUtil.max(0,t.utils.mathUtil.MathUtil.min(a,this._numFrame-1));var s=this._frameList[a];s.addFun(i,n,r,o)},o.removeFrameAction=function(e,i){var n=this.getFrame(e);n=t.utils.mathUtil.MathUtil.max(0,t.utils.mathUtil.MathUtil.min(n,this._numFrame-1));var r=this._frameList[n];r.removeFun(i)},o.tick=function(t){if(this._isPlaying&&this._numFrame>0){if(0==this._loops)return;for(this._frameTimer-=t;this._frameTimer<0;){if(this._curFrame>=this._numFrame-1){if(this._loops>0&&this._loops--,0==this._loops)return void(this._frameTimer=0);this.curFrame=0}else this.curFrame=this.curFrame+1;this._frameTimer+=this._rateTimer}}},o.isTickable=function(){return this._tickable},o.setTickable=function(t){this._tickable=!!t},n(o,"frameList",void 0,function(t){this._frameList=t,this._numFrame=this._frameList.length,this._numFrame>0&&(this.curFrame=0)}),n(o,"loops",void 0,function(t){this._loops=t}),n(o,"curFrame",void 0,function(e){this._curFrame=t.utils.mathUtil.MathUtil.max(0,t.utils.mathUtil.MathUtil.min(this._curFrame,this._numFrame-1));var i=this._frameList[this._curFrame];i.doFun();var n=i.texture;n instanceof egret.Texture?this._baseBitmap.texture=n:this._baseBitmap.bitmapData=n,this._baseBitmap.x=i.x,this._baseBitmap.y=i.y}),o.gotoFrame=function(t){this.curFrame=this.getFrame(t)},o.getFrame=function(t){var e=-1;if(isNaN(t)){for(var i=t,n=this._frameList.length,r=0;n>r;r+=1)if(this._frameList[r].label==i){e=r;break}}else e=t;return-1==e?-1:e},o.onAddedToStage=function(i){e.prototype.onAddedToStage.call(this,i),t.tick.Tick.getInstance().addItem(this)},o.onRemovedFromStage=function(i){e.prototype.onRemovedFromStage.call(this,i),t.tick.Tick.getInstance().removeItem(this)},i}(e.JSprite);e.JMovieClip=i,egret.registerClass(i,"libra.displayObject.JMovieClip",["libra.tick.ITickable"])}(e=t.displayObject||(t.displayObject={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(){function t(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}var e=__define,i=t,n=i.prototype;return e(n,"x",function(){return this._x},function(t){this._x=t}),e(n,"y",function(){return this._y},function(t){this._y=t}),e(n,"width",function(){return this._width},function(t){this._width=t}),e(n,"height",function(){return this._height},function(t){this._height=t}),e(n,"center",function(){return new egret.Point(this.x+.5*this.width,this.y+.5*this.height)},function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}),e(n,"size",function(){return new egret.Point(this.width,this.height)}),e(n,"perimeter",function(){return Math.sqrt(.5*(Math.pow(this.width,2)+Math.pow(this.height,2)))*Math.PI*2*.5}),e(n,"area",function(){return Math.PI*(.5*this.width)*(.5*this.height)}),n.getPointOfDegree=function(t){var e=(t-90)*(Math.PI/180),i=.5*this.width,n=.5*this.height;return new egret.Point(this.x+i+Math.cos(e)*i,this.y+n+Math.sin(e)*n)},n.containsPoint=function(t){var e=.5*this.width,i=.5*this.height,n=t.x-this.x-e,r=t.y-this.y-i;return Math.pow(n/e,2)+Math.pow(r/i,2)<=1},n.equals=function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},n.clone=function(){return new t(this.x,this.y,this.width,this.height)},t}();t.Ellipse=e,egret.registerClass(e,"libra.geom.Ellipse")}(e=t.geom||(t.geom={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(){function t(){this._tickabledList=[],this._pause=!1,egret.Ticker.getInstance().register(this.advanceTime,this)}var e=__define,i=t,n=i.prototype;return n.addItem=function(t){return this.hasItem(t)?!1:(this._tickabledList[this._tickabledList.length]=t,!0)},n.removeItem=function(t){var e=this._tickabledList.indexOf(t);return-1!=e?(this._tickabledList.splice(e,1),!0):!1},n.clearItem=function(){this._tickabledList.length=0},n.hasItem=function(t){return-1!=this._tickabledList.indexOf(t)},e(n,"pause",function(){return this._pause},function(t){this._pause!=t&&(this._pause=t)}),n.advanceTime=function(t){if(!this.pause)for(var e,i=this._tickabledList,n=i.length;--n>-1;)e=i[n],e.isTickable()&&e.tick(t)},t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t}();t.Tick=e,egret.registerClass(e,"libra.tick.Tick")}(e=t.tick||(t.tick={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i){if(void 0===i&&(i=2147483647),0==e.length)return!1;var n=e.concat();return n.splice(0,0,i,0),t.splice.apply(t,n),!0}function i(t,e){for(var i=t.indexOf(e),n=0;-1!=i;)t.splice(i,1),i=t.indexOf(e,i),n++;return n}function n(t,e){for(var i=!1,n=t.length;n--;)e.indexOf(t[n])>-1&&(t.splice(n,1),i=!0);return i}function r(t,e){for(var i=!1,n=t.length;n--;)-1==e.indexOf(t[n])&&(t.splice(n,1),i=!0);return i}function o(t,e){for(var i=t.indexOf(e,0),n=0;-1!=i;)i=t.indexOf(e,i+1),n++;return n}function a(t,e){for(var i=e.length;i--;)if(-1==t.indexOf(e[i]))return!1;return!0}function s(t,e){for(var i=e.length;i--;)if(t.indexOf(e[i])>-1)return!0;return!1}function u(t){var e=t.length;if(e>0){var i=t[0].length,n=[];for(r=0;i>r;r+=1)for(n[r]=[],o=0;e>o;o+=1)n[r][o]=0;for(var r=0;e>r;r+=1)for(var o=0;i>o;o+=1)n[o][r]=t[r][o];return n}return null}t.insertAt=e,t.removeItem=i,t.removeItems=n,t.retainItems=r,t.contains=o,t.containsAll=a,t.containsAny=s,t.rotate=u}(e=t.arrayUtil||(t.arrayUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i,n){var r=t.toString(16),o=e.toString(16),a=i.toString(16),s=n.toString(16);return r=1==r.length?"0"+r:r,o=1==o.length?"0"+o:o,a=1==a.length?"0"+a:a,s=1==s.length?"0"+s:s,(r+o+a+s).toUpperCase()}t.getHexStringFromARGB=e}(e=t.colorUtil||(t.colorUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e}t.createBitmapByName=e}(e=t.commonUtil||(t.commonUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){void 0===e&&(e="YYYY-MM-DD HH:NN:SS");var i=new Date(t),n="",r=i.getFullYear().toString(),o=i.getMonth(),a=10>o?"0"+(o+1):(o+1).toString(),s=i.getDate(),u=10>s?"0"+s:s.toString(),c=i.getHours(),l=10>c?"0"+c:c.toString(),h=i.getMinutes(),f=10>h?"0"+h:h.toString(),d=i.getSeconds(),g=10>d?"0"+d:d.toString();return n=e,n=n.replace(/YYYY/g,r),n=n.replace(/YY/g,r.slice(-2)),n=n.replace(/MM/g,a),n=n.replace(/M/g,String(o+1)),n=n.replace(/DD/g,u),n=n.replace(/D/g,s.toString()),n=n.replace(/A/g,12>c?"AM":"PM"),n=n.replace(/HH/g,l),n=n.replace(/L/g,(c%12).toString()),n=n.replace(/NN/g,f),n=n.replace(/SS/g,g)}function i(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"}t.formatByTime=e,t.getTimeAgo=i}(e=t.dateUtil||(t.dateUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){t.moveTo(e[0].x,e[0].y);for(var i=0;++i<e.length;)t.lineTo(e[i].x,e[i].y)}function i(t,i){e(t,i),t.lineTo(i[0].x,i[0].y)}function n(t,e,i,n){if(Math.abs(n)>=360)return void t.drawEllipse(e.x,e.y,e.width,e.height);i+=90;var r,o=.5*e.width,a=.5*e.height,s=e.x+o,u=e.y+a,c=Math.ceil(Math.abs(n)/45),l=-n/c,h=-(l/180)*Math.PI,f=-(i/180)*Math.PI,d=s+Math.cos(i/180*Math.PI)*o,g=u+Math.sin(-i/180*Math.PI)*a;t.moveTo(s,u),t.lineTo(d,g);for(var v=-1;++v<c;)f+=h,r=f-.5*h,t.curveTo(s+Math.cos(r)*(o/Math.cos(.5*h)),u+Math.sin(r)*(a/Math.cos(.5*h)),s+Math.cos(f)*o,u+Math.sin(f)*a);t.lineTo(s,u)}function r(t,e,i,n,r,o,a,s,u,c,l){void 0===s&&(s=!0),void 0===u&&(u=!0),void 0===c&&(c=!0),void 0===l&&(l=!0);var h=.5*o,f=.5*a;s?t.moveTo(e+h,i):t.moveTo(e,i),u?(t.lineTo(e+n-h,i),t.curveTo(e+n,i,e+n,i+f)):t.lineTo(e+n,i),c?(t.lineTo(e+n,i+r-f),t.curveTo(e+n,i+r,e+n-h,i+r)):t.lineTo(e+n,i+r),l?(t.lineTo(e+h,i+r),t.curveTo(e,i+r,e,i+r-f)):t.lineTo(e,i+r),s?(t.lineTo(e,i+f),t.curveTo(e,i,e+h,i)):t.lineTo(e,i)}function o(t,e){t.drawRect(e.x,e.y,e.width,e.height)}t.drawPath=e,t.drawShape=i,t.drawWedge=n,t.drawRoundRect=r,t.drawRectangle=o}(e=t.drawUtil||(t.drawUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){var i=this;void 0===e&&(e=80);var n=t.x;egret.Tween.get(t).to({x:t.x-10},e).call(function(){egret.Tween.get(t).to({x:t.x+20},e).call(function(){egret.Tween.get(t).to({x:t.x-20},e).call(function(){egret.Tween.get(t).to({x:t.x+20},e).call(function(){egret.Tween.get(t).to({x:n},e)},i)},i)},i)},this)}function i(t,e){var i=this;void 0===e&&(e=40);var n=t.x,r=t.y;egret.Tween.get(t).to({x:t.x-10,y:t.y},e).call(function(){egret.Tween.get(t).to({x:t.x+20,y:t.y},e).call(function(){egret.Tween.get(t).to({x:t.x,y:t.y+15},e).call(function(){egret.Tween.get(t).to({x:t.x,y:t.y-20},e).call(function(){egret.Tween.get(t).to({x:t.x,y:t.y+10},e).call(function(){egret.Tween.get(t).to({x:n,y:r},e)},i)},i)},i)},i)},this)}function n(t,e,i){void 0===i&&(i=200);for(var n=e.split(""),r=n.length,o=0;r>o;o++)egret.setTimeout(function(){t.appendText(n[this])},o,i*o)}t.shakeObj=e,t.shockObj=i,t.typerEffect=n}(e=t.effectUtil||(t.effectUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this._delayFrame=t,this._frameDelay=new n,this._functions=new Array}var i=(__define,e),r=i.prototype;return r.regist=function(t,e){this._functions.push([t,e])},r.execute=function(){if(this._functions.length){var e=this._functions.shift();e[0].call(e[1]),this._frameDelay.delayCall(this._delayFrame,this.execute,this),t.tick.Tick.getInstance().addItem(this._frameDelay)}else t.tick.Tick.getInstance().removeItem(this._frameDelay)},e}();e.FrameExecutor=i,egret.registerClass(i,"libra.utils.executor.FrameExecutor",["libra.utils.executor.IExecutor"]);var n=function(){function t(){}var e=(__define,t),i=e.prototype;return i.tick=function(t){this._curFrame++>=this._delayFrame&&this._func.call(this._thisObj)},i.isTickable=function(){return!0},i.delayCall=function(t,e,i){this._delayFrame=t,this._func=e,this._thisObj=i,this._curFrame=0},t}();egret.registerClass(n,"FrameDelay",["libra.tick.ITickable"])}(i=e.executor||(e.executor={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._callBack=t,this._callBackTarget=e,this._functions=new Array}var e=(__define,t),i=e.prototype;return i.regist=function(t,e){this._functions.push([t,e])},i.execute=function(){this.next()},i.next=function(){if(this._functions.length){var t=this._functions.shift();t[0].call(t[1]),this.next()}else this._callBack&&this._callBack.call(this._callBackTarget)},t}();t.QueueExecutor=e,egret.registerClass(e,"libra.utils.executor.QueueExecutor",["libra.utils.executor.IExecutor"])}(e=t.executor||(t.executor={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){if(egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5){var i=e||location.href;if(-1!=i.indexOf("?")){var n="&"+i.split("?")[1],r=new RegExp("&"+t+"=.*?(?:&|$)"),o=r.exec(n);if(o){var a=o[0];return a.split("&")[1].split("=")[1]}}}return null}t.getParamValue=e}(e=t.locationUtil||(t.locationUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.getRandom=function(e,i){return e=t.min(e,i),i=t.max(e,i),e+Math.random()*(i-e)},t.getPointAngle=function(t,e){return Math.atan2(e,t)},t.R2A=function(e){return Math.floor(e*t.A)},t.A2R=function(e){return e*t.B},t.isApproximateZero=function(e){return t.abs(e)<.001},t.min=function(t,e){return t>e?e:t},t.max=function(t,e){return t>e?t:e},t.abs=function(t){return t>0?t:0-t},t.confine=function(t,e,i){return e>t?e:t>i?i:t},t.random=function(t,e){return Math.random()*(e-t+1)+t},t.getLineFunc=function(t,e,i){void 0===i&&(i=0);var n;if(t.x==e.x){if(!i)throw new Error("两点所确定直线垂直于y轴，不能根据x值得到y值");return n=function(e){return t.x}}if(t.y==e.y){if(i)throw new Error("两点所确定直线垂直于y轴，不能根据x值得到y值");return n=function(e){return t.y}}var r;r=(t.y-e.y)/(t.x-e.x);var o;return o=t.y-r*t.x,n=i?function(t){return(t-o)/r}:function(t){return r*t+o}},t.getSlope=function(t,e){return(e.y-t.y)/(e.x-t.x)},t.isEven=function(t){return 0==(1&t)},t.isOdd=function(e){return!t.isEven(e)},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.isInteger=function(t){return t%1==0},t["int"]=function(t){return t>>0},t.isPrime=function(e){if(1==e||2==e)return!0;if(t.isEven(e))return!1;for(var i=Math.sqrt(e),n=3;i>=n;n++)if(e%n==0)return!1;return!0},t.roundDecimalToPlace=function(t,e){void 0===e&&(e=0);var i=Math.pow(10,e);return Math.round(t*i)/i},t.loopIndex=function(t,e){return void 0===e&&(e=0),0>t&&(t=e+t%e),t>=e?t%e:t},t.isBetween=function(t,e,i){return!(t<Math.min(e,i)||t>Math.max(e,i))},t.constrain=function(t,e,i){return Math.min(Math.max(t,Math.min(e,i)),Math.max(e,i))},t.createStepsBetween=function(t,e,i){i++;for(var n=0,r=[],o=(e-t)/i;++n<i;)r.push(n*o+t);return r},t.map=function(t,e,i,n,r){return n+(r-n)*((t-e)/(i-e))},t.getWeightedAverage=function(t,e,i){return t+(e-t)/i},t.format=function(t,e,i,n){void 0===e&&(e=","),void 0===i&&(i=0),void 0===n&&(n="0");var r=t%1,o=Math.floor(t).toString(),a=o.length;if(0!=i&&i>a){i-=a;for(var s=n||"0";i--;)o=s+o}if(null!=e&&o.length>3){for(var u=Math.floor(o.length/3),c=o.length%3,l=o.split(""),h=-1;++h<u;)l.splice(c+4*h,0,e);0==c&&l.shift(),o=l.join("")}return 0!=r&&(o+=r.toString().substr(1)),o},t.formatCurrency=function(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=",");var r=e%1,o=t.format(Math.floor(e),n);return(0!=r||i)&&(o+=r.toFixed(2).substr(1)),o},t.getOrdinalSuffix=function(t){if(void 0===t&&(t=0),t>=10&&20>=t)return"th";if(0==t)return"";switch(t%10){case 3:return"rd";case 2:return"nd";case 1:return"st";default:return"th"}},t.addLeadingZero=function(t){return 10>t?"0"+t:t.toString()},t.A=180/Math.PI,t.B=Math.PI/180,t}();t.MathUtil=e,egret.registerClass(e,"libra.utils.mathUtil.MathUtil")}(e=t.mathUtil||(t.mathUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return t===e?0:typeof t==typeof e?t>e?-1:1:typeof t>typeof e?-1:1}function i(t,e){return t===e?0:typeof t==typeof e?e>t?-1:1:typeof e>typeof t?-1:1}function n(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1}function r(t){for(var e=[],i=0;i<t.length;i++)e[i]=i;return e}function o(t,n){if(t){var o=t;return n?"function"==typeof n?o.sort(n):n==s.DESCENDING?o.sort(e):n==s.RETURNINDEXEDARRAY?r(o):o.sort(i):o.sort(i),o}}function a(t,n,o){if(t){var a=t,u=function(t,u){var c,l;if("object"==typeof t&&"object"==typeof u&&t&&u){if(c=t[n],l=u[n],!o)return i(c,l);if("function"==typeof o)return o;if(o==s.DESCENDING)return e(c,l);if(o!=s.RETURNINDEXEDARRAY)return i(c,l);r(a)}};return a.sort(u),a}}!function(t){t[t.CASEINSENSITIVE=1]="CASEINSENSITIVE",t[t.DESCENDING=2]="DESCENDING",t[t.UNIQUESORT=4]="UNIQUESORT",t[t.RETURNINDEXEDARRAY=8]="RETURNINDEXEDARRAY",t[t.NUMERIC=16]="NUMERIC"}(t.OrderByType||(t.OrderByType={}));var s=t.OrderByType;t.desc=e,t.asc=i,t.indexOf=n,t.index=r,t.sort=o,t.sortOn=a}(e=t.orderUtil||(t.orderUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(){function t(t,e,i){void 0===e&&(e=6),void 0===i&&(i=null),this._data=[],this._rect=t,this._root=null==i?this:i,this.createChildren(e)}var e=__define,i=t,n=i.prototype;return n.createChildren=function(e){if(0!=e){var i=this._rect.width/2,n=this._rect.height/2,r=this._rect,o=this._root;this._q1=new t(new egret.Rectangle(r.x+i,r.y,i,n),e-1,o),this._q2=new t(new egret.Rectangle(r.x+i,r.y+n,i,n),e-1,o),this._q3=new t(new egret.Rectangle(r.x,r.y+n,i,n),e-1,o),this._q4=new t(new egret.Rectangle(r.x,r.y,i,n),e-1,o),this._q1._parent=this._q2._parent=this._q3._parent=this._q4._parent=this}},e(n,"hasChildren",function(){return null==this._q1?!1:null==this._q2?!1:null==this._q3?!1:null==this._q4?!1:!0}),n.add=function(t,e,i){return this.isIn(e,i)?this.hasChildren?this._q1.add(t,e,i)||this._q2.add(t,e,i)||this._q3.add(t,e,i)||this._q4.add(t,e,i):(this._data.push(t),this):null},n.isIn=function(t,e){var i=this._rect;isNaN(t)||t>=i.x&&t<i.right,isNaN(e)||e>=i.y&&e<i.bottom;return(isNaN(t)||t>=i.x&&t<i.right)&&(isNaN(e)||e>=i.y&&e<i.bottom)},n.remove=function(t,e,i){if(void 0===e&&(e=0/0),void 0===i&&(i=0/0),!this.isIn(e,i))return null;if(this.hasChildren)return this._q1.remove(t,e,i)||this._q2.remove(t,e,i)||this._q3.remove(t,e,i)||this._q4.remove(t,e,i);var n=this._data.indexOf(t);return-1!=n?(this._data.splice(n,1),this):null},n.reinsert=function(t,e,i){if(!this.isIn(e,i)){var n=this._root.add(t,e,i);if(n)return this.remove(t),n}return this},n.getDataInRect=function(t){if(!this._rect.intersects(t))return[];var e=this._data.concat();return this.hasChildren&&(e.push.apply(null,this._q1.getDataInRect(t)),e.push.apply(null,this._q2.getDataInRect(t)),e.push.apply(null,this._q3.getDataInRect(t)),e.push.apply(null,this._q4.getDataInRect(t))),e},t}();t.QuadTree=e,egret.registerClass(e,"libra.utils.QuadTree")}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i){if(void 0===i&&(i="type"),!t)return null;for(var n=0,r=0,o=t.length-1;o>=n;)r=o+n>>1,t[r][i]>e?o=r-1:n=r+1;return t[n-1]}t.queryByType=e;var i=function(){function t(){}var e=(__define,t);e.prototype;return t.queryByType=function(t,e,i){if(void 0===i&&(i="type"),!t)return null;for(var n=0,r=0,o=t.length-1;o>=n;)r=o+n>>1,t[r][i]>e?o=r-1:n=r+1;return t[n-1]},t}();t.T=i,egret.registerClass(i,"libra.utils.queryUtil.T")}(e=t.queryUtil||(t.queryUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t){var e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return e.test(t)}function i(t){var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return e.test(t)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}t.checkEmail=e,t.isIP=i}(e=t.regUtil||(t.regUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")}function i(t){for(var e=t.split(""),i=0,r=0;r<e.length;r++)i+=n(e[r])?2:1;return i}function n(t){var e=/^[u4E00-u9FA5]+$/;return!e.test(t)}t.trimSpace=e,t.getStringLength=i,t.isChinese=n}(e=t.stringUtil||(t.stringUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createSplash())},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.createSplash=function(){var t=new Splash;t.addEventListener("inited",this.createGameScene,this),this.addChild(t)},n.createGameScene=function(){this.addChild(new GameScene)},n.drama=function(t){console.log(t)},n.getDataFromServer=function(){egret.log("aa"),console.log("bbbb")},n.onGetComplete=function(t){var e=t.target,i=e.data,n=i.toString(),r=JSON.parse(n);console.log("origin:"+r.origin)},n.onGetIOError=function(t){console.log("get error : "+t)},n.onGetProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Splash=function(t){function e(){t.call(this,RES.getRes("Logo_jpg")),this.x=libra.display.cx()-(this.width>>1),this.y=libra.display.cy()-(this.height>>1),this.alpha=0,egret.Tween.get(this).to({alpha:1},2e3).call(this.onCompleted,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onCompleted=function(){this.parent.removeChild(this),this.dispatchEvent(new egret.Event("inited"))},e}(egret.Bitmap);egret.registerClass(Splash,"Splash");var ImageLoader=function(t){function e(){t.call(this),this._imageLoader=new egret.ImageLoader,this._textuerMap=new libra.collection.Dictionary,this._textuerLoading=new libra.collection.List,this._total=0,this._curIndex=0,this._isLoading=!1,this._curUrl=null,this._imageLoader.crossOrigin="Anonymous",this._imageLoader.addEventListener(egret.Event.COMPLETE,this.onLoadCompleted,this),this._imageLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.addImage=function(t){if(!this._isLoading){if(this._textuerMap.has(t))return;if(-1!=this._textuerLoading.indexOf(t))return;this._textuerLoading.addItem(t)}},n.addImages=function(t){if(!this._isLoading)for(var e=0;e<t.length;e++){var i=t[e];this.addImage(i)}},n.startLoad=function(){this._isLoading||(this._total=this._textuerLoading.size,this._curIndex=-1,this.load())},n.getTexture=function(t){return this._textuerMap.get(t)},n.load=function(){if(++this._curIndex<this._total){var t=this._textuerLoading.getItemAt(this._curIndex);this._curUrl=t,this._imageLoader.load(t)}else this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},n.onLoadCompleted=function(t){var e=t.currentTarget;this._textuerMap.set(this._curUrl,e.data),this.load()
},n.onError=function(t){this.dispatchEvent(t)},e}(egret.EventDispatcher);egret.registerClass(ImageLoader,"ImageLoader");