var libra;!function(t){var e;!function(t){var e=function(){function t(t){void 0===t&&(t={}),this.elements=t,this.hasSpecialProto=!1,this.specialProto=void 0}var e=(__define,t);return p=e.prototype,p.has=function(t){return"__proto__"===t?this.hasSpecialProto:{}.hasOwnProperty.call(this.elements,t)},p.get=function(t){return"__proto__"===t?this.specialProto:this.has(t)?this.elements[t]:void 0},p.set=function(t,e){"__proto__"===t?(this.hasSpecialProto=!0,this.specialProto=e):this.elements[t]=e},p.remove=function(t){"__proto__"===t?(this.hasSpecialProto=!1,this.specialProto=void 0):delete this.elements[t]},t}();t.Dictionary=e,egret.registerClass(e,"libra.collection.Dictionary")}(e=t.collection||(t.collection={}))}(libra||(libra={}));var libra;!function(t){var e;!function(e){var i=function(){function e(t){this._collection=null==t?[]:t.concat()}var i=__define,n=e;return p=n.prototype,p.addItem=function(t){return this._collection.push(t),!0},p.addItemAt=function(t,e){return void 0===e&&(e=0),this._collection.splice(e,0,t),!0},p.addItems=function(t){return this._collection=this._collection.concat(t.toArray()),!0},p.addItemsAt=function(e,i){return void 0===i&&(i=2147483647),t.utils.arrayUtil.addItemsAt(this._collection,e.toArray(),i)},p.clear=function(){this._collection.splice(0)},p.contains=function(t){return-1!=this.indexOf(t)},p.containsAll=function(e){return t.utils.arrayUtil.containsAll(this._collection,e.toArray())},p.getItemAt=function(t){return void 0===t&&(t=0),this._collection[t]},p.subList=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=16777215),new e(this._collection.slice(t,i))},p.indexOf=function(t,e){return void 0===e&&(e=0),this._collection.indexOf(t,e)},p.isEmpty=function(){return 0==this.size},p.lastIndexOf=function(t,e){return void 0===e&&(e=2147483647),this._collection.lastIndexOf(t,e)},i(p,"size",function(){return this._collection.length}),p.removeAllInstancesOfItem=function(e){return 0!=t.utils.arrayUtil.removeItem(this._collection,e)},p.removeItem=function(t){var e=this._collection.indexOf(t);return-1==e?!1:(this._collection.splice(e,1),!0)},p.removeItemAt=function(t){return void 0===t&&(t=0),this._collection.splice(t,1)[0]},p.removeItems=function(e){return t.utils.arrayUtil.removeItems(this._collection,e.toArray())},p.retainItems=function(e){return t.utils.arrayUtil.retainItems(this._collection,e.toArray())},p.setItem=function(t,e){return void 0===e&&(e=0),this._collection.splice(e,1,t)[0]},p.toArray=function(){return this._collection.concat()},p.clone=function(){return new e(this.toArray())},e}();e.List=i,egret.registerClass(i,"libra.collection.List")}(e=t.collection||(t.collection={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){function e(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"micromessenger"==e}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function n(){{var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i)}return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function r(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"}function o(){if(egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5){if(-1!=navigator.userAgent.indexOf("MQQBrowser"))return"QQ";if(-1!=navigator.userAgent.indexOf("MSIE"))return"IE";if(-1!=navigator.userAgent.indexOf("Firefox"))return"Firefox";if(-1!=navigator.userAgent.indexOf("Chrome"))return"Chrome";if(-1!=navigator.userAgent.indexOf("Safari"))return"Safari";if(-1!=navigator.userAgent.indexOf("Opera"))return"Opera"}return null}t.isWeiXin=e,t.isBigScreen=i,t.systemType=n,t.platformType=r,t.getBrowserType=o}(e=t.device||(t.device={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){function e(t){return new egret.Bitmap(RES.getRes(t))}function i(){return egret.MainContext.instance}function n(){return i().stage.stageWidth}function r(){return i().stage.stageHeight}function o(){return n()>>1}function a(){return r()>>1}t.createBitmap=e,t.getMain=i,t.stageWidth=n,t.stageHeight=r,t.cx=o,t.cy=a}(e=t.display||(t.display={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.removeSelf=function(){this.parent&&this.parent.removeChild(this)},p.addTo=function(t,e){e?t.addChildAt(this,e):t.addChild(this)},p.onAddedToStage=function(){this.once(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this)},p.onRemovedFromStage=function(){this.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)},e}(egret.DisplayObject);t.JMovieClip=e,egret.registerClass(e,"libra.displayObject.JMovieClip",["libra.displayObject.IDisplayObject"])}(e=t.displayObject||(t.displayObject={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.removeSelf=function(){this.parent&&this.parent.removeChild(this)},p.addTo=function(t,e){e?t.addChildAt(this,e):t.addChild(this)},p.onAddedToStage=function(){this.once(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this)},p.onRemovedFromStage=function(){this.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)},e}(egret.Sprite);t.JSprite=e,egret.registerClass(e,"libra.displayObject.JSprite",["libra.displayObject.IDisplayObject"])}(e=t.displayObject||(t.displayObject={}))}(libra||(libra={}));var libra;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,e}(t.displayObject.JSprite);e.BaseScene=i,egret.registerClass(i,"libra.game.BaseScene")}(e=t.game||(t.game={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(){function t(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}var e=__define,i=t;return p=i.prototype,e(p,"x",function(){return this._x},function(t){this._x=t}),e(p,"y",function(){return this._y},function(t){this._y=t}),e(p,"width",function(){return this._width},function(t){this._width=t}),e(p,"height",function(){return this._height},function(t){this._height=t}),e(p,"center",function(){return new egret.Point(this.x+.5*this.width,this.y+.5*this.height)},function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}),e(p,"size",function(){return new egret.Point(this.width,this.height)}),e(p,"perimeter",function(){return Math.sqrt(.5*(Math.pow(this.width,2)+Math.pow(this.height,2)))*Math.PI*2*.5}),e(p,"area",function(){return.5*Math.PI*this.width*.5*this.height}),p.getPointOfDegree=function(t){var e=(t-90)*(Math.PI/180),i=.5*this.width,n=.5*this.height;return new egret.Point(this.x+i+Math.cos(e)*i,this.y+n+Math.sin(e)*n)},p.containsPoint=function(t){var e=.5*this.width,i=.5*this.height,n=t.x-this.x-e,r=t.y-this.y-i;return Math.pow(n/e,2)+Math.pow(r/i,2)<=1},p.equals=function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},p.clone=function(){return new t(this.x,this.y,this.width,this.height)},t}();t.Ellipse=e,egret.registerClass(e,"libra.geom.Ellipse")}(e=t.geom||(t.geom={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e=function(){function t(){this._tickabledList=[],this._pause=!1,egret.Ticker.getInstance().register(this.advanceTime,this)}var e=__define,i=t;return p=i.prototype,p.addItem=function(t){return this.hasItem(t)?!1:(this._tickabledList[this._tickabledList.length]=t,!0)},p.removeItem=function(t){var e=this._tickabledList.indexOf(t);return-1!=e?(this._tickabledList.splice(e,1),!0):!1},p.clearItem=function(){this._tickabledList.length=0},p.hasItem=function(t){return-1!=this._tickabledList.indexOf(t)},e(p,"pause",function(){return this._pause},function(t){this._pause!=t&&(this._pause=t)}),p.advanceTime=function(t){if(!this.pause)for(var e,i=this._tickabledList,n=i.length;--n>-1;)e=i[n],e.isTickabled()&&e.tick(t)},t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t}();t.Tick=e,egret.registerClass(e,"libra.tick.Tick")}(e=t.tick||(t.tick={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i){if(void 0===i&&(i=2147483647),0==e.length)return!1;var n=e.concat();return n.splice(0,0,i,0),t.splice.apply(t,n),!0}function i(t,e){for(var i=t.indexOf(e),n=0;-1!=i;)t.splice(i,1),i=t.indexOf(e,i),n++;return n}function n(t,e){for(var i=!1,n=t.length;n--;)e.indexOf(t[n])>-1&&(t.splice(n,1),i=!0);return i}function r(t,e){for(var i=!1,n=t.length;n--;)-1==e.indexOf(t[n])&&(t.splice(n,1),i=!0);return i}function o(t,e){for(var i=t.indexOf(e,0),n=0;-1!=i;)i=t.indexOf(e,i+1),n++;return n}function a(t,e){for(var i=e.length;i--;)if(-1==t.indexOf(e[i]))return!1;return!0}function s(t,e){for(var i=e.length;i--;)if(t.indexOf(e[i])>-1)return!0;return!1}t.addItemsAt=e,t.removeItem=i,t.removeItems=n,t.retainItems=r,t.contains=o,t.containsAll=a,t.containsAny=s}(e=t.arrayUtil||(t.arrayUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i,n){var r=t.toString(16),o=e.toString(16),a=i.toString(16),s=n.toString(16);return r=1==r.length?"0"+r:r,o=1==o.length?"0"+o:o,a=1==a.length?"0"+a:a,s=1==s.length?"0"+s:s,(r+o+a+s).toUpperCase()}t.getHexStringFromARGB=e}(e=t.colorUtil||(t.colorUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){void 0===e&&(e="YYYY-MM-DD HH:NN:SS");var i=new Date(t),n="",r=i.getFullYear().toString(),o=i.getMonth(),a=10>o?"0"+(o+1):(o+1).toString(),s=i.getDate(),c=10>s?"0"+s:s.toString(),u=i.getHours(),l=10>u?"0"+u:u.toString(),h=i.getMinutes(),f=10>h?"0"+h:h.toString(),d=i.getSeconds(),g=10>d?"0"+d:d.toString();return n=e,n=n.replace(/YYYY/g,r),n=n.replace(/YY/g,r.slice(-2)),n=n.replace(/MM/g,a),n=n.replace(/M/g,String(o+1)),n=n.replace(/DD/g,c),n=n.replace(/D/g,s.toString()),n=n.replace(/A/g,12>u?"AM":"PM"),n=n.replace(/HH/g,l),n=n.replace(/L/g,(u%12).toString()),n=n.replace(/NN/g,f),n=n.replace(/SS/g,g)}function i(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"}t.formatByTime=e,t.getTimeAgo=i}(e=t.dateUtil||(t.dateUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){t.moveTo(e[0].x,e[0].y);for(var i=0;++i<e.length;)t.lineTo(e[i].x,e[i].y)}function i(t,i){e(t,i),t.lineTo(i[0].x,i[0].y)}function n(t,e,i,n){if(Math.abs(n)>=360)return void t.drawEllipse(e.x,e.y,e.width,e.height);i+=90;var r,o=.5*e.width,a=.5*e.height,s=e.x+o,c=e.y+a,u=Math.ceil(Math.abs(n)/45),l=-n/u,h=-(l/180)*Math.PI,f=-(i/180)*Math.PI,d=s+Math.cos(i/180*Math.PI)*o,g=c+Math.sin(-i/180*Math.PI)*a;t.moveTo(s,c),t.lineTo(d,g);for(var p=-1;++p<u;)f+=h,r=f-.5*h,t.curveTo(s+Math.cos(r)*(o/Math.cos(.5*h)),c+Math.sin(r)*(a/Math.cos(.5*h)),s+Math.cos(f)*o,c+Math.sin(f)*a);t.lineTo(s,c)}function r(t,e,i,n,r,o,a,s,c,u,l){void 0===s&&(s=!0),void 0===c&&(c=!0),void 0===u&&(u=!0),void 0===l&&(l=!0);var h=.5*o,f=.5*a;s?t.moveTo(e+h,i):t.moveTo(e,i),c?(t.lineTo(e+n-h,i),t.curveTo(e+n,i,e+n,i+f)):t.lineTo(e+n,i),u?(t.lineTo(e+n,i+r-f),t.curveTo(e+n,i+r,e+n-h,i+r)):t.lineTo(e+n,i+r),l?(t.lineTo(e+h,i+r),t.curveTo(e,i+r,e,i+r-f)):t.lineTo(e,i+r),s?(t.lineTo(e,i+f),t.curveTo(e,i,e+h,i)):t.lineTo(e,i)}function o(t,e){t.drawRect(e.x,e.y,e.width,e.height)}t.drawPath=e,t.drawShape=i,t.drawWedge=n,t.drawRoundRect=r,t.drawRectangle=o}(e=t.drawUtil||(t.drawUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){var i=this;void 0===e&&(e=80);var n=t.x;egret.Tween.get(t).to({x:t.x-10},e).call(function(){egret.Tween.get(t).to({x:t.x+20},e).call(function(){egret.Tween.get(t).to({x:t.x-20},e).call(function(){egret.Tween.get(t).to({x:t.x+20},e).call(function(){egret.Tween.get(t).to({x:n},e)},i)},i)},i)},this)}function i(t,e){var i=this;void 0===e&&(e=40);var n=t.x,r=t.y;egret.Tween.get(t).to({x:t.x-10,y:t.y},e).call(function(){egret.Tween.get(t).to({x:t.x+20,y:t.y},e).call(function(){egret.Tween.get(t).to({x:t.x,y:t.y+15},e).call(function(){egret.Tween.get(t).to({x:t.x,y:t.y-20},e).call(function(){egret.Tween.get(t).to({x:t.x,y:t.y+10},e).call(function(){egret.Tween.get(t).to({x:n,y:r},e)},i)},i)},i)},i)},this)}function n(t,e,i){void 0===i&&(i=200);for(var n=e.split(""),r=n.length,o=0;r>o;o++)egret.setTimeout(function(){t.appendText(n[this])},o,i*o)}t.shakeObj=e,t.shockObj=i,t.typerEffect=n}(e=t.effectUtil||(t.effectUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(t){this._delayFrame=t,this._frameDelay=new n,this._functions=new Array}var i=(__define,e);return p=i.prototype,p.regist=function(t,e){this._functions.push([t,e])},p.execute=function(){if(this._functions.length){var e=this._functions.shift();e[0].call(e[1]),this._frameDelay.delayCall(this._delayFrame,this.execute,this),t.tick.Tick.getInstance().addItem(this._frameDelay)}else t.tick.Tick.getInstance().removeItem(this._frameDelay)},e}();e.FrameExecutor=i,egret.registerClass(i,"libra.utils.executor.FrameExecutor",["libra.utils.executor.IExecutor"]);var n=function(){function t(){}var e=(__define,t);return p=e.prototype,p.tick=function(){this._curFrame++>=this._delayFrame&&this._func.call(this._thisObj)},p.isTickabled=function(){return!0},p.delayCall=function(t,e,i){this._delayFrame=t,this._func=e,this._thisObj=i,this._curFrame=0},t}();egret.registerClass(n,"FrameDelay",["libra.tick.ITickable"])}(i=e.executor||(e.executor={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._callBack=t,this._callBackTarget=e,this._functions=new Array}var e=(__define,t);return p=e.prototype,p.regist=function(t,e){this._functions.push([t,e])},p.execute=function(){this.next()},p.next=function(){if(this._functions.length){var t=this._functions.shift();t[0].call(t[1]),this.next()}else this._callBack&&this._callBack.call(this._callBackTarget)},t}();t.QueueExecutor=e,egret.registerClass(e,"libra.utils.executor.QueueExecutor",["libra.utils.executor.IExecutor"])}(e=t.executor||(t.executor={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){if(egret.MainContext.runtimeType==egret.MainContext.RUNTIME_HTML5){var i=e||location.href;if(-1!=i.indexOf("?")){var n="&"+i.split("?")[1],r=new RegExp("&"+t+"=.*?(?:&|$)"),o=r.exec(n);if(o){var a=o[0];return a.split("&")[1].split("=")[1]}}}return null}t.getParamValue=e}(e=t.locationUtil||(t.locationUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}var e=(__define,t);return p=e.prototype,t.getRandom=function(e,i){return e=t.min(e,i),i=t.max(e,i),e+Math.random()*(i-e)},t.getPointAngle=function(t,e){return Math.atan2(e,t)},t.R2A=function(e){return Math.floor(e*t.A)},t.A2R=function(e){return e*t.B},t.isApproximateZero=function(e){return t.abs(e)<.001},t.min=function(t,e){return t>e?e:t},t.max=function(t,e){return t>e?t:e},t.abs=function(t){return t>0?t:0-t},t.confine=function(t,e,i){return e>t?e:t>i?i:t},t.random=function(t,e){return Math.random()*(e-t+1)+t},t.getLineFunc=function(t,e,i){void 0===i&&(i=0);var n;if(t.x==e.x){if(!i)throw new Error("Á½µãËùȷ¶¨ֱÏߴ¹ֱÓÚyÖᣬ²»Äܸù¾Ýxֵµõ½yֵ");return n=function(){return t.x}}if(t.y==e.y){if(i)throw new Error("Á½µãËùȷ¶¨ֱÏߴ¹ֱÓÚyÖᣬ²»Äܸù¾Ýxֵµõ½yֵ");return n=function(){return t.y}}var r;r=(t.y-e.y)/(t.x-e.x);var o;return o=t.y-r*t.x,n=i?function(t){return(t-o)/r}:function(t){return r*t+o}},t.getSlope=function(t,e){return(e.y-t.y)/(e.x-t.x)},t.isEven=function(t){return 0==(1&t)},t.isOdd=function(e){return!t.isEven(e)},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.isInteger=function(t){return t%1==0},t["int"]=function(t){return t>>0},t.isPrime=function(e){if(1==e||2==e)return!0;if(t.isEven(e))return!1;for(var i=Math.sqrt(e),n=3;i>=n;n++)if(e%n==0)return!1;return!0},t.roundDecimalToPlace=function(t,e){void 0===e&&(e=0);var i=Math.pow(10,e);return Math.round(t*i)/i},t.loopIndex=function(t,e){return void 0===e&&(e=0),0>t&&(t=e+t%e),t>=e?t%e:t},t.isBetween=function(t,e,i){return!(t<Math.min(e,i)||t>Math.max(e,i))},t.constrain=function(t,e,i){return Math.min(Math.max(t,Math.min(e,i)),Math.max(e,i))},t.createStepsBetween=function(t,e,i){i++;for(var n=0,r=[],o=(e-t)/i;++n<i;)r.push(n*o+t);return r},t.map=function(t,e,i,n,r){return n+(r-n)*((t-e)/(i-e))},t.getWeightedAverage=function(t,e,i){return t+(e-t)/i},t.format=function(t,e,i,n){void 0===e&&(e=","),void 0===i&&(i=0),void 0===n&&(n="0");var r=t%1,o=Math.floor(t).toString(),a=o.length;if(0!=i&&i>a){i-=a;for(var s=n||"0";i--;)o=s+o}if(null!=e&&o.length>3){for(var c=Math.floor(o.length/3),u=o.length%3,l=o.split(""),h=-1;++h<c;)l.splice(u+4*h,0,e);0==u&&l.shift(),o=l.join("")}return 0!=r&&(o+=r.toString().substr(1)),o},t.formatCurrency=function(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=",");var r=e%1,o=t.format(Math.floor(e),n);return(0!=r||i)&&(o+=r.toFixed(2).substr(1)),o},t.getOrdinalSuffix=function(t){if(void 0===t&&(t=0),t>=10&&20>=t)return"th";if(0==t)return"";switch(t%10){case 3:return"rd";case 2:return"nd";case 1:return"st";default:return"th"}},t.addLeadingZero=function(t){return 10>t?"0"+t:t.toString()},t.A=180/Math.PI,t.B=Math.PI/180,t}();t.MathUtil=e,egret.registerClass(e,"libra.utils.mathUtil.MathUtil")}(e=t.mathUtil||(t.mathUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return t===e?0:typeof t==typeof e?t>e?-1:1:typeof t>typeof e?-1:1}function i(t,e){return t===e?0:typeof t==typeof e?e>t?-1:1:typeof e>typeof t?-1:1}function n(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1}function r(t){for(var e=[],i=0;i<t.length;i++)e[i]=i;return e}function o(t,n){if(t){var o=t;return n?"function"==typeof n?o.sort(n):2==n?o.sort(e):8==n?r(o):o.sort(i):o.sort(i),o}}function a(t,n,o){if(t){var a=t,s=function(t,s){var c,u;if("object"==typeof t&&"object"==typeof s&&t&&s){if(c=t[n],u=s[n],!o)return i(c,u);if("function"==typeof o)return o;if(2==o)return e(c,u);if(8!=o)return i(c,u);r(a)}};return a.sort(s),a}}!function(t){t[t.CASEINSENSITIVE=1]="CASEINSENSITIVE",t[t.DESCENDING=2]="DESCENDING",t[t.UNIQUESORT=4]="UNIQUESORT",t[t.RETURNINDEXEDARRAY=8]="RETURNINDEXEDARRAY",t[t.NUMERIC=16]="NUMERIC"}(t.OrderByType||(t.OrderByType={}));t.OrderByType;t.desc=e,t.asc=i,t.indexOf=n,t.index=r,t.sort=o,t.sortOn=a}(e=t.orderUtil||(t.orderUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t){var e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return e.test(t)}function i(t){var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return e.test(t)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}t.checkEmail=e,t.isIP=i}(e=t.regUtil||(t.regUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var libra;!function(t){var e;!function(t){var e;!function(t){function e(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")}function i(t){for(var e=t.split(""),i=0,r=0;r<e.length;r++)i+=n(e[r])?2:1;return i}function n(t){var e=/^[u4E00-u9FA5]+$/;return!e.test(t)}t.trimSpace=e,t.getStringLength=i,t.isChinese=n}(e=t.stringUtil||(t.stringUtil={}))}(e=t.utils||(t.utils={}))}(libra||(libra={}));var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},p.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},p.onConfigComplete=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},p.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.createGameScene())},p.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},p.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},p.createGameScene=function(){var t=this.createBitmapByName("bgImage");this.addChild(t);var e=this.stage.stageWidth,i=this.stage.stageHeight;t.width=e,t.height=i;var n=this.createBitmapByName("egretIcon");this.addChild(n),n.scaleX=.55,n.scaleY=.55,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.x=e/2,n.y=i/2-60,n.blendMode=egret.BlendMode.ERASE,t.mask=n;var r=new egret.TextField;r.textColor=16777215,r.textAlign="center",r.text="Hello Egret",r.size=20,r.x=e-r.width>>1,r.y=(i-r.height>>1)+50,this.addChild(r);var o=new egret.TextField;this.addChild(o),o.alpha=0,o.width=e,o.textAlign=egret.HorizontalAlign.CENTER,o.x=0,o.y=i/2+100,this.textfield=o,new Test(this)},p.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},p.startAnimation=function(t){for(var e=this,i=new egret.HtmlTextParser,n=[],r=0;r<t.length;r++)n.push(i.parser(t[r]));var o=e.textfield,a=-1,s=function(){a++,a>=n.length&&(a=0);var t=n[a];e.changeDescription(o,t);var i=egret.Tween.get(o);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(s,e)};s()},p.changeDescription=function(t,e){t.textFlow=e},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Test=function(){function t(){for(var t=egret.MainContext.instance.stage,e=3e3,i=0;e>i;i++)this.createMC(t);console.log("舞台MC数量:",e)}var e=(__define,t);return p=e.prototype,p.createMC=function(t){var e=new egret.MovieClipDataFactory(RES.getRes("testJson"),RES.getRes("testPng")).generateMovieClipData(),i=new egret.MovieClip(e);i.frameRate=12,i.x=libra.utils.mathUtil.MathUtil.getRandom(0,libra.display.stageWidth()),i.y=libra.utils.mathUtil.MathUtil.getRandom(0,libra.display.stageHeight()),t.addChild(i),i.play(10)},t}();egret.registerClass(Test,"Test");