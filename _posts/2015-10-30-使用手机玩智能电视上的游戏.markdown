---
layout:     post
title:      "使用手机玩智能电视上的游戏"
subtitle:   ""
date:       2015-10-30 12:00:00
author:     "鸿杰"
tags:
    - 电视游戏
---

前几天啊公司里的同事留意到一款智能电视上的游戏，叫[《决斗吧 兄弟》](http://www.chaojitv.com/news/73094.html)，这貌似是一款格斗游戏，我还没玩过。之所以关注这款游戏是因为其中的家庭模式支持本地双人一起玩。一个玩家使用遥控器，一个玩家使用手机，并且手机端不需要安装APP。这个特别有意思啊，不安装APP就可以使用手机遥控智能电视上的游戏，那么理论上只要有手机的玩家都可以参与进来一起玩耍了。

要实现这个功能，其实很简单。

1.准备一个带有上下左右确定取消按钮的html5页面，其中每个按钮的点击都使用webSocket和游戏客户端进行通信。

2.在游戏客户端内启动webSocket服务，通过html5所在的web服务器URL、智能电视内网ip以及webSocket的端口生成二维码。

3.手机扫码，通过浏览器访问我们已经制作好的html5页面，点击页面上的某个按钮和游戏客户端握手，握手成功后便可以使用webSocket相互通信了。

手机要和游戏通信，还有一个大前提啊，就是他们得在同一个局域网里。如果不在一个局域网，那么手机就要和游戏服务器通信，服务器再和客户端通信，这样就绕了一大圈，稳定性和体验上肯定都大打折扣。

花了半天时间做了一个demo，经测试手机端和本地的webSocket已成功连接，为了截图方便，我就使用浏览器测试了。
![手机扫码使用webSocket和游戏通信](http://7u2qiz.com1.z0.glb.clouddn.com/QQ截图20151030225808.png)

[相关代码在github上](https://github.com/Eddie104/Libra-Server)