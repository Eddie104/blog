---
layout: post
title: Reac-Native里的坑
category: react-native
comments: true
---

1. 当TouchableHighlight中包含Image并且Image包含Text时，点击时会报错:

```
<TouchableHighlight onPress={this.onTryLogin} underlayColor="#d9f2f3">
	<Image style={{justifyContent:'center'}} source={require('./../common/imgs/btnBg.png')}>
		<Text style={styles.loginText}>登录</Text>
	</Image>
</TouchableHighlight>
```
报错如图:
![报错图](http://7u2qiz.com1.z0.glb.clouddn.com/Screenshot_2015-11-19-12-59-48.png)

具体原因不明，解决方法，在Image外面再包一个View:

```
<View>
	<Image style={{justifyContent:'center'}} source={require('./../common/imgs/btnBg.png')}>
		<Text style={styles.loginText}>登录</Text>
	</Image>
</View>
```

2. java方法的参数，Callback类型的参数后面要么没有参数，要么全是Callback类型的，否则会引起闪退。原因不明。

错误的写法如下:

```
@ReactMethod
public void showDatepicker(Callback successCallback, int year, int month, int day, ) {
	DialogFragment dateDialog = new DatePicker(successCallback, year, month, day, );
	dateDialog.show(mActivity.getSupportFragmentManager(), "datePicker");
}
```

正确的写法如下:

```
@ReactMethod
public void showDatepicker(int year, int month, int day, Callback successCallback) {
	DialogFragment dateDialog = new DatePicker(year, month, day, successCallback);
	dateDialog.show(mActivity.getSupportFragmentManager(), "datePicker");
}
```